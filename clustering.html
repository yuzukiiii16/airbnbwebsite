<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airbnb 房源風格推薦</title>
    
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/clustering.css" rel="stylesheet">
    <link href="color.css" rel="stylesheet">
    
    
    <style>
        /* ⭐️請修改不同群卡片對應的顏色樣式⭐️ */
        /* border-color為邊框顏色 ；background-color為背景顏色 */
        .border-cluster-0 { border-color: #bfff00 !important; }
        .header-cluster-0 { background-color: #bfff00; color: #333 !important; }

        .border-cluster-1 { border-color: #00ffff !important; }
        .header-cluster-1 { background-color: #00ffff; color: #333 !important; }

        .border-cluster-2 { border-color: #8A2BE2 !important; }
        .header-cluster-2 { background-color: #8A2BE2; }

        /* 選項文字大小 */
        .quiz-question .form-check-label {
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <!-- 此測驗使用的分群數為 3 -->
    <!-- 首頁：顯示標題與「開始測驗」按鈕 -->
    <header class="hero-section  text-center">
        <div class="container">
            <h1 class="display-4 fw-bold">找不到理想的房間嗎？</h1>
            <p class="lead my-3">回答三個簡單問題，讓我們為你找到最合適的 Airbnb 風格！</p>
            <button id="start-quiz-btn" class="btn btn-primary btn-lg">開始測驗！</button>
        </div>
    </header>

    <main class="container my-5">

        <!-- ❗可以自己改寫問題與選項，但要確保方向與原本主題一致❗ -->
        <section id="quiz-section" class="d-none">
            <h2 class="text-center mb-5">告訴我們你的旅行偏好</h2>
            <form id="quiz-form" class="col-lg-8 mx-auto">
                <!-- 問題 1 -->
                <div class="quiz-question mb-4">
                    <p class="lead fw-bold">1. 這次旅行，你最看重的是什麼？</p>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="q1" id="q1a" value="value" required>
                        <label class="form-check-label" for="q1a">高 CP 值和評價</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="q1" id="q1b" value="luxury">
                        <label class="form-check-label" for="q1b">寬敞的空間和高品質的設施</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="q1" id="q1c" value="budget">
                        <label class="form-check-label" for="q1c">價格是否便宜</label>
                    </div>
                </div>

                <!-- 問題 2 -->
                <div class="quiz-question mb-4">
                    <p class="lead fw-bold">2. 你通常會跟幾個人一起去旅行？</p>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="q2" id="q2a" value="solo_couple" required>
                        <label class="form-check-label" for="q2a">1-2人</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="q2" id="q2b" value="family_group">
                        <label class="form-check-label" for="q2b">3人以上</label>
                    </div>
                </div>

                <!-- 問題 3 -->
                <div class="quiz-question mb-4">
                    <p class="lead fw-bold">3. 你比較喜歡哪種房東風格？</p>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="q3" id="q3a" value="personal" required>
                        <label class="form-check-label" for="q3a">熱情好客、會推薦私房景點和美食的房東</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="q3" id="q3b" value="professional">
                        <label class="form-check-label" for="q3b">專業管理、入住流程標準化的房東</label>
                    </div>
                     <div class="form-check">
                        <input class="form-check-input" type="radio" name="q3" id="q3c" value="either">
                        <label class="form-check-label" for="q3c">都可以，我不太和房東互動</label>
                    </div>
                </div>
                
                <div class="text-center mt-5">
                    <button type="submit" class="btn btn-success btn-lg">查看我的專屬推薦</button>
                </div>
            </form>
        </section>

        <section id="result-section" class="d-none">
            <div id="result-display" class="mb-5">
            </div>


            <div class="text-center mb-5">
                <button id="retest-btn" class="btn btn-outline-primary btn-lg">重新測驗一次</button>
            </div>

            <h3 class="text-center mt-5 mb-4 border-top pt-5">其他房源風格參考</h3>
            <div id="other-options-display" class="row">
            </div>
        </section>

    </main>

    <!-- ⭐️ 請貼上頁尾 ⭐️ -->
    <footer class="py-4 footer-custom">
        <div class="container text-center">
            <small>Copyright © OO高中OO班第O組 2025</small>
        </div>
    </footer>

    <!-- 引入 Bootstrap 的 JavaScript 功能 (必須放在 </body> 前) -->
    <script src="js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // 取得網頁中會互動的元素
            const startBtn = document.getElementById('start-quiz-btn');  // 首頁「開始測驗」按鈕
            const heroSection = document.querySelector('.hero-section'); // 首頁橫幅區
            const quizSection = document.getElementById('quiz-section'); // 問卷區
            const resultSection = document.getElementById('result-section'); // 結果區
            const quizForm = document.getElementById('quiz-form'); // 問卷表單
            const resultDisplay = document.getElementById('result-display'); // 結果顯示區
            const otherOptionsDisplay = document.getElementById('other-options-display'); // 其他選項顯示區
            const retestBtn = document.getElementById('retest-btn'); // 重新測驗按鈕

            // ⭐️請更改各群的介紹⭐️
            const clusterData = {
                cluster0: {
                    title: '高 CP 值人氣王',
                    tag: '高CP值人氣房源',
                    borderColor: 'border-cluster-0',
                    headerColor: 'header-cluster-0',
                    description: '你追求的是物超所值的體驗！這類房源價格合理，由用心經營的個人房東提供，因此擁有大量住客好評。非常適合希望深入體驗當地文化、同時兼顧預算和品質的你。',
                    features: ['超高評價', '價格親民', '個人房東', '適合1-2人']
                },
                cluster1: {
                    title: '豪華大空間房源',
                    tag: '豪華/家庭式房源',
                    borderColor: 'border-cluster-1',
                    headerColor: 'header-cluster-1',
                    description: '你和你的旅伴值得最好的！這類房源提供最寬敞的空間和最優質的設施，是家庭旅遊或團體出行的首選。雖然價格最高，但能給你帶來無與倫比的舒適與奢華體驗。',
                    features: ['空間最大', '設施頂級', '適合家庭/團體', '價格較高']
                },
                cluster2: {
                    title: '專業經濟型房源',
                    tag: '專業經濟型房源',
                    borderColor: 'border-cluster-2',
                    headerColor: 'header-cluster-2',
                    description: '對你來說，住宿是旅程的一部分，但不是全部。這類房源由專業團隊管理，提供標準化、乾淨且價格極具競爭力的住宿。雖然互動較少，但能讓你把預算花在更重要的地方。',
                    features: ['價格最低', '專業管理', '方便入住', '適合預算有限者']
                }
            };

            // 點擊「開始測驗」後隱藏首頁、顯示問卷
            startBtn.addEventListener('click', () => {
                heroSection.classList.add('d-none');
                quizSection.classList.remove('d-none');
            });

            // 當問卷提交時執行評分與顯示結果
            quizForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const scores = calculateScores();
                const bestMatch = determineBestMatch(scores);
                displayResults(bestMatch);
                quizSection.classList.add('d-none');
                resultSection.classList.remove('d-none');
                window.scrollTo(0, 0); 
            });

            // 點擊「重新測驗」按鈕，重設問卷
            retestBtn.addEventListener('click', () => {
                resetQuiz();
            });


            // 重設問卷狀態
            function resetQuiz() {
                resultSection.classList.add('d-none');
                quizSection.classList.remove('d-none');
                quizForm.reset();
                quizSection.scrollIntoView({ behavior: 'smooth' });
            }

            // 計算各群得分
            function calculateScores() {
                const scores = { cluster0: 0, cluster1: 0, cluster2: 0 };
                const formData = new FormData(quizForm);

                // 問題1：旅遊優先考量
                const q1 = formData.get('q1');
                if (q1 === 'value') scores.cluster0 += 2;
                if (q1 === 'luxury') scores.cluster1 += 2;
                if (q1 === 'budget') scores.cluster2 += 2;

                // 問題2：同行人數
                const q2 = formData.get('q2');
                if (q2 === 'solo_couple') {
                    scores.cluster0 += 1;
                    scores.cluster2 += 1;
                }
                if (q2 === 'family_group') scores.cluster1 += 2;

                // 問題3：房東風格偏好
                const q3 = formData.get('q3');
                if (q3 === 'personal') scores.cluster0 += 2;
                if (q3 === 'professional') scores.cluster2 += 2;
                if (q3 === 'either') {
                    scores.cluster1 += 1;
                    scores.cluster2 += 1;
                }
                
                return scores;
            }

            // 判斷哪一群得分最高
            function determineBestMatch(scores) {
                return Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
            }

            // 顯示推薦結果與其他房源
            function displayResults(bestMatch) {
                // 清空舊結果
                resultDisplay.innerHTML = '';
                otherOptionsDisplay.innerHTML = '';

                // 顯示主要推薦房源
                resultDisplay.innerHTML = createCardHTML(clusterData[bestMatch], true);
                
                // 顯示其他選項
                for (const clusterKey in clusterData) {
                    if (clusterKey !== bestMatch) {
                        const cardHTML = createCardHTML(clusterData[clusterKey], false);
                        const col = document.createElement('div');
                        col.className = 'col-md-6 mb-4';
                        col.innerHTML = cardHTML;
                        otherOptionsDisplay.appendChild(col);
                    }
                }
            }


            // 產生每群結果的 HTML 結構
            function createCardHTML(data, isBestMatch) {
                const featuresHTML = data.features.map(feature => 
                    `<span class="badge rounded-pill bg-light text-dark me-2 mb-2 p-2">${feature}</span>`
                ).join('');
    
                const mainCardClass = isBestMatch ? 'col-lg-10 mx-auto' : '';

                return `
                    <div class="${mainCardClass}">
                        <div class="card h-100 shadow-sm result-card ${data.borderColor}">
                            <div class="card-header ${data.headerColor} text-center result-card-header">
                                ${data.title}
                            </div>
                            <div class="card-body p-4">
                                <h5 class="card-title text-muted mb-3">${data.tag}</h5>
                                <p class="card-text">${data.description}</p>
                                <hr>
                                <h6 class="fw-bold">主要特色：</h6>
                                <div>${featuresHTML}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
        });
    </script>

</body>
</html>